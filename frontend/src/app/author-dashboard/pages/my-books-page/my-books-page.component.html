<h1 class="text-3xl font-bold mb-8">Mis libros publicados</h1>
<button
  routerLink="/write/books/new"
  class="btn btn-primary mb-6"
>
  + Nuevo libro
</button>

@if (booksResource.isLoading()) {
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6">
    @for (i of [0,1,2,3,4,5]; track i) {
      <div class="h-[200px] md:h-[280px] lg:h-[300px]">
        <div class="skeleton h-full w-full"></div>
      </div>
    }
  </div>
}

@if (booksResource.error()) {
  <div class="text-center py-10">
    <p class="text-error-content">Error al cargar los libros. Intenta nuevamente.</p>
  </div>
}

@if (!booksResource.isLoading() && !booksResource.error()) {
    @if (data().length > 0) {
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6">
      @for (book of data(); track book.id) {
        <div class="h-[200px] md:h-[280px] lg:h-[300px] pb-8">
          <book-card [card]="book"></book-card>

          <!-- Botones con routerLink -->
          <div class="flex justify-center gap-2 mt-2">

            <!-- Editar libro -->
            <a
              [routerLink]="['/writer/books', book.id, 'edit']"
              class="btn btn-primary btn-xs text-white flex items-center gap-1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
              </svg>
              Editar
            </a>

            <!-- Ver estadÃ­sticas -->
            <a
              [routerLink]="['/writer/books', book.id, 'analytics']"
              class="btn btn-secondary btn-xs text-white flex items-center gap-1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
              </svg>
              Stats
            </a>
          </div>
        </div>
      }
    </div>

    <shared-pagination
      [currentPage]="paginationService.currentPage()"
      [pages]="booksResource.value()?.totalPages ?? 0"
    />
  } @else {
    <div class="text-center py-10">
      <p class="text-base-content text-lg">No se encontraron libros.</p>
    </div>
  }
}
